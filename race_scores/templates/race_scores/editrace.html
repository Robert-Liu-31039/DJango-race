{% extends "base.html" %}
{% block title %}å»ºç«‹é‹å‹•è³½äº‹{% endblock %}

{% block style %}

{% endblock %}

{% block content %}
<a class="back-link" href="{% url 'raceindex' %}">â† å›é¦–é </a>
<h1>ğŸ“ å»ºç«‹é‹å‹•è³½äº‹</h1>

<div class="form-container" style="max-width: 100%;">
    
    <form method="POST">
        {% csrf_token %}

        <table>
            <tr>
                <td>é¸æ‰‹å§“åï¼š</td>
                <td>{{ form.player_name }}</td>
            </tr>
            <tr>
                <td>å ´åœ°ï¼š</td>
                <td>{{ form.area }}</td>
                <td>è³½å¼ç´šåˆ¥ï¼š</td>
                <td>{{ form.level }}</td>
            </tr>
            <tr>
                <td>å¹´é½¡ï¼š</td>
                <td>{{ form.year }}</td>
                <td>ç¹©å­é¡è‰²ï¼š</td>
                <td>{{ form.color }}</td>
            </tr>
            <tr>
                <td>æ€§åˆ¥ï¼š</td>
                <td>{{ form.sex }}</td>
            </tr>
        </table>

        <button class="submit-btn" type="submit">å»ºç«‹</button>
    </form>
</div>

<div class="form-container" style="max-width: 100%;background-color: white;">
    <table style="text-align: center;width:100%;border-collapse: collapse; ">
        <thead>
            <tr style="background-color: lightgreen;">
                <th style="border: 1px solid black; padding: 10px;">å§“å</th>
                <th style="border: 1px solid black; padding: 10px;">å ´åœ°</th>
                <th style="border: 1px solid black; padding: 10px;">è³½å¼ç´šåˆ¥</th>
                <th style="border: 1px solid black; padding: 10px;">å¹´é½¡</th>
                <th style="border: 1px solid black; padding: 10px;">ç¹©å­é¡è‰²</th>
                <th style="border: 1px solid black; padding: 10px;">æ€§åˆ¥</th>
                <th style="border: 1px solid black; padding: 10px;"></th>
            </tr>            
        </thead>
        <tbody>
            {% for data in page_obj %}
            <tr>
                <td style="border: 1px solid black; padding: 10px;">{{data.player_name}}</td>
                <td style="border: 1px solid black; padding: 10px;">{{data.area}}</td>
                <td style="border: 1px solid black; padding: 10px;">{{data.level}}</td>
                <td style="border: 1px solid black; padding: 10px;">{{data.year}}</td>
                <td style="border: 1px solid black; padding: 10px;">{{data.color}}</td>
                <td style="border: 1px solid black; padding: 10px;">{{data.sex}}</td>
                <td style="border: 1px solid black; padding: 10px;">
                    <a class="button button-danger" href="{% url 'racedelete' data.id %}"
                        onclick="return confirm('ç¢ºèªæ˜¯å¦åˆªé™¤?!')">åˆªé™¤</a>
                </td>
            </tr>

            {% endfor %}
        </tbody>
        
    </table>

    <!-- åˆ†é æ§åˆ¶ UI -->
    <div class="pagination">        
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; ç¬¬ä¸€é </a>
            <a href="?page={{ page_obj.previous_page_number }}">ä¸Šä¸€é </a>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <strong>{{ num }}</strong>
            {% elif num >= page_obj.number|add:'-2' and num <= page_obj.number|add:'2' %}
                <a href="?page={{ num }}">{{ num }}</a>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">ä¸‹ä¸€é </a>
            <a href="?page={{ page_obj.paginator.num_pages }}">æœ€å¾Œä¸€é  &raquo;</a>
        {% endif %}
        <div>ç¸½å…± : <font color="red">{{page_obj.paginator.num_pages}}</font> é </div> 
    </div>
</div>
{% endblock %}